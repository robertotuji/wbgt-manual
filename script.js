
const wbgtTable = {
  "40": {
    "20": 29,
    "25": 30,
    "30": 31,
    "35": 32,
    "40": 33,
    "45": 34,
    "50": 35,
    "55": 36,
    "60": 37,
    "65": 38,
    "70": 39,
    "75": 40,
    "80": 41,
    "85": 42,
    "90": 43,
    "95": 44,
    "100": 44
  },
  "39": {
    "20": 28,
    "25": 29,
    "30": 30,
    "35": 31,
    "40": 32,
    "45": 33,
    "50": 34,
    "55": 35,
    "60": 36,
    "65": 37,
    "70": 38,
    "75": 39,
    "80": 40,
    "85": 41,
    "90": 42,
    "95": 43,
    "100": 43
  },
  "38": {
    "20": 28,
    "25": 28,
    "30": 29,
    "35": 30,
    "40": 31,
    "45": 32,
    "50": 33,
    "55": 35,
    "60": 35,
    "65": 36,
    "70": 37,
    "75": 38,
    "80": 39,
    "85": 40,
    "90": 41,
    "95": 42,
    "100": 42
  },
  "37": {
    "20": 27,
    "25": 28,
    "30": 29,
    "35": 29,
    "40": 30,
    "45": 31,
    "50": 32,
    "55": 35,
    "60": 35,
    "65": 35,
    "70": 36,
    "75": 37,
    "80": 38,
    "85": 39,
    "90": 40,
    "95": 41,
    "100": 41
  },
  "36": {
    "20": 26,
    "25": 27,
    "30": 28,
    "35": 29,
    "40": 29,
    "45": 30,
    "50": 31,
    "55": 33,
    "60": 34,
    "65": 34,
    "70": 35,
    "75": 36,
    "80": 37,
    "85": 38,
    "90": 39,
    "95": 40,
    "100": 40
  },
  "35": {
    "20": 25,
    "25": 26,
    "30": 27,
    "35": 28,
    "40": 29,
    "45": 29,
    "50": 30,
    "55": 32,
    "60": 33,
    "65": 33,
    "70": 34,
    "75": 35,
    "80": 36,
    "85": 37,
    "90": 38,
    "95": 39,
    "100": 39
  },
  "34": {
    "20": 25,
    "25": 25,
    "30": 26,
    "35": 27,
    "40": 28,
    "45": 29,
    "50": 29,
    "55": 31,
    "60": 32,
    "65": 33,
    "70": 33,
    "75": 34,
    "80": 35,
    "85": 36,
    "90": 37,
    "95": 38,
    "100": 38
  },
  "33": {
    "20": 24,
    "25": 25,
    "30": 25,
    "35": 26,
    "40": 27,
    "45": 28,
    "50": 28,
    "55": 30,
    "60": 31,
    "65": 32,
    "70": 33,
    "75": 33,
    "80": 34,
    "85": 35,
    "90": 36,
    "95": 37,
    "100": 37
  },
  "32": {
    "20": 23,
    "25": 24,
    "30": 25,
    "35": 25,
    "40": 26,
    "45": 27,
    "50": 28,
    "55": 29,
    "60": 30,
    "65": 31,
    "70": 32,
    "75": 32,
    "80": 33,
    "85": 34,
    "90": 35,
    "95": 35,
    "100": 36
  },
  "31": {
    "20": 22,
    "25": 23,
    "30": 24,
    "35": 24,
    "40": 25,
    "45": 26,
    "50": 27,
    "55": 28,
    "60": 29,
    "65": 30,
    "70": 31,
    "75": 31,
    "80": 32,
    "85": 33,
    "90": 34,
    "95": 34,
    "100": 35
  },
  "30": {
    "20": 21,
    "25": 22,
    "30": 23,
    "35": 24,
    "40": 24,
    "45": 25,
    "50": 26,
    "55": 27,
    "60": 28,
    "65": 29,
    "70": 30,
    "75": 30,
    "80": 31,
    "85": 32,
    "90": 33,
    "95": 33,
    "100": 34
  },
  "29": {
    "20": 21,
    "25": 21,
    "30": 22,
    "35": 23,
    "40": 24,
    "45": 24,
    "50": 25,
    "55": 27,
    "60": 27,
    "65": 28,
    "70": 29,
    "75": 29,
    "80": 30,
    "85": 31,
    "90": 32,
    "95": 32,
    "100": 33
  },
  "28": {
    "20": 20,
    "25": 21,
    "30": 21,
    "35": 22,
    "40": 23,
    "45": 23,
    "50": 24,
    "55": 26,
    "60": 26,
    "65": 27,
    "70": 28,
    "75": 29,
    "80": 29,
    "85": 30,
    "90": 31,
    "95": 31,
    "100": 32
  },
  "27": {
    "20": 19,
    "25": 20,
    "30": 21,
    "35": 21,
    "40": 22,
    "45": 23,
    "50": 23,
    "55": 25,
    "60": 26,
    "65": 27,
    "70": 28,
    "75": 28,
    "80": 29,
    "85": 30,
    "90": 30,
    "95": 31,
    "100": 31
  },
  "26": {
    "20": 18,
    "25": 19,
    "30": 20,
    "35": 20,
    "40": 21,
    "45": 22,
    "50": 22,
    "55": 25,
    "60": 25,
    "65": 26,
    "70": 27,
    "75": 27,
    "80": 28,
    "85": 29,
    "90": 29,
    "95": 30,
    "100": 30
  },
  "25": {
    "20": 18,
    "25": 18,
    "30": 19,
    "35": 20,
    "40": 20,
    "45": 21,
    "50": 22,
    "55": 24,
    "60": 24,
    "65": 25,
    "70": 26,
    "75": 26,
    "80": 27,
    "85": 28,
    "90": 28,
    "95": 29,
    "100": 29
  },
  "24": {
    "20": 17,
    "25": 18,
    "30": 18,
    "35": 19,
    "40": 19,
    "45": 20,
    "50": 21,
    "55": 23,
    "60": 23,
    "65": 24,
    "70": 25,
    "75": 25,
    "80": 26,
    "85": 27,
    "90": 27,
    "95": 28,
    "100": 28
  },
  "23": {
    "20": 16,
    "25": 17,
    "30": 17,
    "35": 18,
    "40": 19,
    "45": 19,
    "50": 20,
    "55": 22,
    "60": 22,
    "65": 23,
    "70": 24,
    "75": 24,
    "80": 25,
    "85": 26,
    "90": 26,
    "95": 27,
    "100": 27
  },
  "22": {
    "20": 15,
    "25": 16,
    "30": 17,
    "35": 17,
    "40": 18,
    "45": 18,
    "50": 19,
    "55": 21,
    "60": 22,
    "65": 22,
    "70": 23,
    "75": 23,
    "80": 24,
    "85": 25,
    "90": 25,
    "95": 26,
    "100": 26
  },
  "21": {
    "20": 15,
    "25": 15,
    "30": 16,
    "35": 16,
    "40": 17,
    "45": 17,
    "50": 18,
    "55": 20,
    "60": 21,
    "65": 22,
    "70": 22,
    "75": 23,
    "80": 23,
    "85": 24,
    "90": 25,
    "95": 25,
    "100": 25
  }
};

const i18n = {
  jp: {
    title: "WBGT手動チェッカー",
    temp: "気温 (°C)",
    hum: "湿度 (%)",
    calc: "WBGTを計算",
    clear: "クリア",
    select: "選択",
    danger: ["ほぼ安全", "注意", "警戒", "厳重警戒", "危険"],
    error: "⚠️ データが見つかりません。"
  },
  pt: {
    title: "Verificador WBGT Manual",
    temp: "Temperatura (°C)",
    hum: "Umidade (%)",
    calc: "Calcular WBGT",
    clear: "Limpar",
    select: "Selecionar",
    danger: ["Seguro", "Atenção", "Alerta", "Alerta Grave", "Perigo"],
    error: "⚠️ Valor fora da faixa da tabela."
  },
  en: {
    title: "WBGT Manual Checker",
    temp: "Temperature (°C)",
    hum: "Humidity (%)",
    calc: "Calculate WBGT",
    clear: "Clear",
    select: "Select",
    danger: ["Safe", "Caution", "Warning", "High Risk", "Danger"],
    error: "⚠️ Value out of range."
  },
  id: {
    title: "Pemeriksa WBGT Manual",
    temp: "Suhu (°C)",
    hum: "Kelembaban (%)",
    calc: "Hitung WBGT",
    clear: "Hapus",
    select: "Pilih",
    danger: ["Aman", "Perhatian", "Waspada", "Waspada Ekstrem", "Bahaya"],
    error: "⚠️ Nilai di luar jangkauan."
  }
};

function updateLanguage(lang) {
  const t = i18n[lang];
  document.getElementById("title").textContent = t.title;
  document.getElementById("html-title").textContent = t.title;
  document.getElementById("label-temp").textContent = t.temp;
  document.getElementById("label-hum").textContent = t.hum;
  document.getElementById("calculate").textContent = t.calc;
  document.getElementById("clear").textContent = t.clear;
  document.getElementById("select-default").textContent = t.select;
}

document.getElementById("language-select").addEventListener("change", e => {
  updateLanguage(e.target.value);
});
document.getElementById("toggle-theme").addEventListener("click", () => {
  document.body.classList.toggle("dark");
});
document.getElementById("calculate").addEventListener("click", () => {
  const temp = document.getElementById("temperature").value;
  const hum = document.getElementById("humidity").value;
  const lang = document.getElementById("language-select").value;
  const resultEl = document.getElementById("result");
  const resultBox = document.getElementById("result-box");
  const danger = i18n[lang].danger;
  const fallback = i18n[lang].error;

  if (!wbgtTable[temp] || !wbgtTable[temp][hum]) {
    resultBox.style.background = "#ddd";
    resultEl.innerHTML = fallback;
    return;
  }

  const wbgt = wbgtTable[temp][hum];
  let color = "", label = "";

  if (wbgt < 21) { color = "deepskyblue"; label = danger[0]; }
  else if (wbgt < 25) { color = "gold"; label = danger[1]; }
  else if (wbgt < 28) { color = "orange"; label = danger[2]; }
  else if (wbgt < 31) { color = "orangered"; label = danger[3]; }
  else { color = "red"; label = danger[4]; }

  resultBox.style.background = color;
  resultEl.innerHTML = `WBGT: ${wbgt}°C<br><strong>${label}</strong>`;
});
document.getElementById("clear").addEventListener("click", () => {
  document.getElementById("temperature").value = "";
  document.getElementById("humidity").value = "";
  document.getElementById("result").innerHTML = "";
  document.getElementById("result-box").style.background = "transparent";
});

// Inicializa com o idioma padrão
updateLanguage("jp");
